<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Financiera Gamer</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/countup.js/2.8.0/countUp.umd.min.js"></script>
</head>

<body data-theme="purple">
    <div id="particles-js"></div>
    <div id="button-particles" class="button-particles"></div>
    <audio id="clickSound" src="sounds/ClickSound.mp3" preload="auto"></audio>
    <audio id="calculateSound" src="sounds/NotificationSound.mp3" preload="auto"></audio>
    <audio id="themeSound" src="sounds/ThemeSound.mp3" preload="auto"></audio>

    <div class="container">
        <h1 class="glitch" data-text="üí∞ Calculadora Financiera Gamer üí∞">üí∞ Calculadora Financiera Gamer üí∞</h1>
        <div class="theme-selector">
            <label for="theme">Tema:</label>
            <select id="theme" aria-label="Seleccionar tema de color">
                <option value="purple">Morado Ne√≥n</option>
                <option value="green">Verde Ne√≥n</option>
                <option value="blue">Azul Ne√≥n</option>
            </select>
        </div>
        <div class="calculator">
            <form id="calcForm" aria-label="Formulario de c√°lculos financieros">
                <div class="form-group">
                    <label for="currency">Moneda:</label>
                    <select id="currency" aria-label="Seleccionar moneda">
                        <option value="USD">USD ($)</option>
                        <option value="EUR">EUR (‚Ç¨)</option>
                        <option value="MXN">MXN ($)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="amount">Monto Principal:</label>
                    <input type="number" id="amount" placeholder="Ej: 1000" required aria-describedby="amount-error">
                    <span id="amount-error" class="error-tooltip"></span>
                </div>
                <div class="form-group">
                    <label for="rate">Tasa de Inter√©s (% anual):</label>
                    <input type="number" id="rate" placeholder="5" step="0.01" required aria-describedby="rate-error">
                    <span id="rate-error" class="error-tooltip"></span>
                </div>
                <div class="form-group">
                    <label for="time">Tiempo (a√±os):</label>
                    <input type="number" id="time" placeholder="0" required aria-describedby="time-error">
                    <span id="time-error" class="error-tooltip"></span>
                </div>
                <div class="form-group">
                    <label for="cashFlows">Flujos de Caja (separados por comas):</label>
                    <input type="text" id="cashFlows" placeholder="Ej: -1000, 500, 600"
                        aria-describedby="cashFlows-error">
                    <span id="cashFlows-error" class="error-tooltip"></span>
                </div>
                <div class="form-group sensitivity-group" style="display: none;">
                    <label for="rateRange">Rango de Tasas para Sensibilidad (%):</label>
                    <input type="text" id="rateRange" placeholder="Ej: 2,8" aria-describedby="rateRange-error">
                    <span id="rateRange-error" class="error-tooltip"></span>
                </div>
                <div class="input-group">
                    <label for="calcType">Tipo de C√°lculo:</label>
                    <select id="calcType" aria-label="Seleccionar tipo de c√°lculo">
                        <option value="simple">Inter√©s Simple</option>
                        <option value="compound">Inter√©s Compuesto</option>
                        <option value="amortization">Amortizaci√≥n</option>
                        <option value="npv">VAN (Valor Actual Neto)</option>
                        <option value="irr">TIR (Tasa Interna de Retorno)</option>
                        <option value="sensitivity">An√°lisis de Sensibilidad</option>
                    </select>
                </div>
                <button type="submit" class="btn-calculate">Calcular</button>
            </form>
            <div id="result" class="result" aria-live="polite"></div>
            <div id="amortizationTable" class="amortization-table"></div>
            <canvas id="chartCanvas" width="400" height="200" aria-label="Gr√°fico de resultados financieros"></canvas>
            <div class="export-buttons">
                <button id="downloadChartBtn" class="btn btn-secondary" disabled>Descargar Gr√°fico</button>
                <button id="exportPdfBtn" class="btn btn-secondary" disabled>Exportar PDF</button>
            </div>
            <div class="history">
                <h2>Historial de C√°lculos</h2>
                <ul id="historyList" aria-label="Lista de c√°lculos previos"></ul>
                <button id="clearHistory" class="btn btn-clear">Limpiar Historial</button>
                <button id="downloadHistory" class="btn btn-clear">Descargar Historial (CSV)</button>
            </div>
        </div>
    </div>
    <div id="tutorialModal" class="tutorial-modal">
        <div class="tutorial-content">
            <h2 class="glitch" data-text="Tutorial Interactivo">Tutorial Interactivo</h2>
            <p id="tutorialText" aria-live="polite"></p>
            <button id="prevStep" class="btn btn-secondary">Anterior</button>
            <button id="nextStep" class="btn btn-secondary">Siguiente</button>
            <button id="closeTutorial" class="btn btn-clear">Cerrar</button>
        </div>
    </div>
    <script src="script.js"></script>
</body>

</html>